sudo: required
language: python
python:
  - "2.7"
services:
  - docker
before_install:
    - docker build -t fab_sshd_ubuntu tests/
install:
    - pip install fabric
    - pip install nose
    # place apparmor docker profile in complain mode
    # to workaround https://github.com/travis-ci/travis-ci/issues/4661
    - sudo apt-get -y update
    - sudo apt-get -y install apparmor-utils
    - sudo aa-complain /etc/apparmor.d/docker
script:
    - sudo service docker restart; sleep 10
    - nosetests -v
